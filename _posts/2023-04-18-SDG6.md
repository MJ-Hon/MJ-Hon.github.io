---
layout: single
title: "2022 K-SDGs 환경분야 이행 점검을 위한 반응형 대시보드의 활용"
---
# Goal 6. 건강하고 안전한 물관리

```python
import pandas as pd
sdg = pd.read_excel('https://docs.google.com/spreadsheets/d/e/2PACX-1vSheI7FJzY_d4HdGA-oNvCcqvG6-f9L99lkw46WQmSj2zzdYAsmWy7FmHJKJ-pujg/pub?output=xlsx')
sdg.info()
```


```python
ncsd = pd.read_excel('https://docs.google.com/spreadsheets/d/e/2PACX-1vRYK8GLD42gFbXu1FZaL07cPkQ87ggC4kvzcJJ7K09v_31NkcelD6Mvf0ID3i6hTA/pub?output=xlsx')
ncsd.info()
```


```python
from bokeh.io import show, output_notebook
from bokeh.plotting import figure, output_file, show
from bokeh.layouts import column
from bokeh.models import ColumnDataSource, CustomJS, HoverTool, RadioButtonGroup
import pandas as pd
output_notebook()
```


```python
source = ColumnDataSource(data={
    'x': sdg.Year,
    'y': sdg.K6_1_1
})

p = figure(width=600, height=300, x_axis_label="연도", y_axis_label="%", title="안전하게 관리되는 식수서비스를 이용하는 인구 비율(%)")
p.title.text_font_size = '15pt'

p.line(x='x', y='y', color='firebrick', source=source)

hover = HoverTool(tooltips=[("Year", "@x"), ("Value", "@y{0.00}%")])
p.add_tools(hover)

p.legend.location = "top_left"
p.legend.click_policy = "mute"
show(p)
```

    /usr/local/lib/python3.9/dist-packages/bokeh/models/plots.py:815: UserWarning: 
    You are attempting to set `plot.legend.location` on a plot that has zero legends added, this will have no effect.
    
    Before legend properties can be set, you must add a Legend explicitly, or call a glyph method with a legend parameter set.
    
      warnings.warn(_LEGEND_EMPTY_WARNING % attr)
    /usr/local/lib/python3.9/dist-packages/bokeh/models/plots.py:815: UserWarning: 
    You are attempting to set `plot.legend.click_policy` on a plot that has zero legends added, this will have no effect.
    
    Before legend properties can be set, you must add a Legend explicitly, or call a glyph method with a legend parameter set.
    
      warnings.warn(_LEGEND_EMPTY_WARNING % attr)






<div class="bk-root" id="9bd6e4ae-c4ae-4b78-bbef-91bcf4122df1" data-root-id="3141"></div>






```python
# Create ColumnDataSources for each graph
source1 = ColumnDataSource(data={
    'x': ncsd.Year,
    'y': ncsd.SDG_6_1_2_전국,
    'label': ['전국'] * len(ncsd.Year)
})

source2 = ColumnDataSource(data={
    'x': ncsd.Year,
    'y': ncsd.SDG_6_1_2_농어촌,
    'label': ['농어촌'] * len(ncsd.Year)
})

source3 = ColumnDataSource(data={
    'x': ncsd.Year,
    'y': ncsd.SDG_6_1_2_전국a,
    'label': ['전국'] * len(ncsd.Year)
})

source4 = ColumnDataSource(data={
    'x': ncsd.Year,
    'y': ncsd.SDG_6_1_2_농어촌a,
    'label': ['농어촌'] * len(ncsd.Year)
})

# Create the initial figure
p = figure(width=600, height=300, x_axis_label="연도", y_axis_label="%", title="상수도 보급률")
p.title.text_font_size = '15pt'

# Add the initial lines and hover tool
line1 = p.line(x='x', y='y', legend_label='전국', color='firebrick', source=source1)
line2 = p.line(x='x', y='y', legend_label='농어촌', color='navy', source=source2)

line3 = p.line(x='x', y='y', legend_label='전국', color='firebrick', source=source3)
line4 = p.line(x='x', y='y', legend_label='농어촌', color='navy', source=source4)

hover = HoverTool(tooltips=[("Year", "@x"), ("Value", "@y{0.00}%"), ("Label", "@label")])
p.add_tools(hover)

p.legend.location = "top_left"
p.legend.click_policy = "mute"

# Create the RadioButtonGroup
radio_button_group = RadioButtonGroup(labels=["상수도 보급률", "지방 광역상수도 이용 급수 보급률"], active=0)

# Define the callback
callback = CustomJS(args=dict(line1=line1, line2=line2, line3=line3, line4=line4, source1=source1, source2=source2, source3=source3, source4=source4), code="""
    const selected = cb_obj.active;
    if (selected == 0) {
        line1.visible = true;
        line2.visible = true;
        line3.visible = false;
        line4.visible = false;
        source1.visible = true;
        source2.visible = true;
        source3.visible = false;
        source4.visible = false;
    } else if (selected == 1) {
        line1.visible = false;
        line2.visible = false;
        line3.visible = true;
        line4.visible = true;
        source1.visible = false;
        source2.visible = false;      
        source3.visible = true;
        source4.visible = true;
    }
""")

# Attach the callback to the RadioButtonGroup
radio_button_group.js_on_change('active', callback)

# Display the plot and RadioButtonGroup
show(column(p, radio_button_group))
```





<div class="bk-root" id="c78bdcc2-4a04-4b8b-b8d9-a7061b841694" data-root-id="3362"></div>






```python

from bokeh.embed import file_html
from bokeh.resources import CDN

# Create ColumnDataSources and figure as in the previous code

# Create HTML file
html = file_html(p, CDN, "my_plot")

# Save HTML file to local drive
with open("my_plot.html", "w") as f:
    f.write(html)
```


```python

```
